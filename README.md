# Practice
Practice 放的是我寫的課堂作業以外的一些 C++ 程式，主要可以分成三個種類
- 蒙地卡羅模擬
- 題目練習
- 簡單的小遊戲

## 蒙地卡羅模擬
[ArknightsRaffle.cpp](https://github.com/Guan-Yu-Chen/Practice/blob/main/MonteCarloSimulation/ArknightsRaffle.cpp)模擬了手遊 Arknights 的抽獎機制，會寫這段程式是因為它的抽獎機制和其他遊戲不太一樣。

抽獎機制如下:  
遊戲裡最大獎是六星角色，獲得機率是2%。如果連續50次沒有獲得六星角色，則下一次獲得機率從2%提升至4%，如果該次還沒有獲得六星角色，則下一次獲得機率從4%提升至6%。依此類推，直到100%時必定獲得六星角色。  

也就是說，前50抽的機率都是2%，第51抽是4%，第52抽是6%，直到第99抽時100%。沒有保底機制的話，每一抽的機率都是2%，抽出一隻六星角色的期望值就是50抽。但增加了這個機制後，期望抽數就會降低，雖然詳細數值還是可以計算，但是就不像 100/2=50抽 這麼容易找到答案，所以我才打算用蒙地卡羅模擬。

以下是模擬了100萬次抽獎的結果，期望值是大約是 34.59抽，根據網路上其他人實際計算後的正確期望值是 34.6抽，可以看出模擬的結果和實際數值只有非常小的誤差。

<img src="https://i.imgur.com/IEOmzqq.png" width="100%">  
  
## 題目練習

[Examination](https://github.com/Guan-Yu-Chen/Practice/tree/main/Examination)裡面的程式題目來自於機械系的朋友跟我分享他們系上計算機概論的段考題，每一道題分別代表每次考試裡面他們認為最有趣或最難的題目，我出於好奇心就也寫了我的解法和他們一起討論。  

### 泰勒展開式
這道題目要我們使用泰勒展開式去計算 cos(x) 的逼近值，直到誤差小於 10e-6 ，並寫出到第幾項誤差值才會小於 10e-6  

<img src="https://images.collegedunia.com/public/image/86d48527578c0232c74fb4facf8778d0.png" width="40%">  

我認為比較有問題的點在於微分和階乘的部分。微分的話，要知道`cos > -sin > -cos > sin > …` 的規律。另一個是階乘，資料型態要使用`long`或`long long` 否則在算到 13! 以上就會溢位，這兩個點都解決的話程式基本上就沒問題了

<img src="https://i.imgur.com/W5V7U4k.png" width="50%">  

### 高斯消去法
生成一個 7×8 的增廣矩陣，並隨機填入 -9 ~ 9 的整數進去，接著算出每個方程式的解  

<img src="https://imgur.com/iV09dUT.png" width="60%">  

### 河內塔
一道非常經典的題目，讓使用者輸入圓盤的數量n，輸出讓n個圓盤從A桿移到C桿所需的步驟以及所花費的步數。  
這道題目我是直接列出 n = 1 ～ n = 5的步驟，然後觀察其中的規律。列出來後就能容易看出所需花費的步數是2^n-1，而詳細步驟則可以用遞迴來實現。  

另外我在程式裡面用到了`邏輯互斥或( ^ )` 的技巧，這個方法很久以前就知道了，但一直找不到適合的使用時機。透過這個方法，可以做到在三個數字之間做互換。
例如：
```
(1 ^ 2) -> 3
(1 ^ 3) -> 2
(2 ^ 3) -> 1
```
再搭配array，就能做出輸入A、B，輸出C；輸入B、C，輸出A......的效果。

<img src="https://imgur.com/HNvZCoe.png" width="50%">  

## 小遊戲

其中包含兩個小遊戲，一個是 Bulls and Cows(1A2B)，另一個是 五子棋  

### Bulls and Cows ( 1A2B )
1A2B 是計算機概論這堂課的final project，是分組完成的作業。  
而[BullsAndCows.cpp](https://github.com/Guan-Yu-Chen/Practice/blob/main/Game/BullsAndCows.cpp) 是project完成後，我再自己修改部分細節後的程式。例如 `int power_10(int)` 這個function，它的作用其實就是 `<cmath>` 裡的 `pow()` 函式，但我在測試的時候發現，應該是VSCode編譯器的問題，在計算10的次方時會出現例如9999的數字，造成程式出錯，所以我另外寫了這個函式來代替它。  

在寫這個遊戲的時候，我遇到比較大的問題是排版。我認為就算是文字類型的遊戲，視覺感受也是遊戲中重要的一部分，所以我希望可以讓終端機不只是單純輸出內容，而是可以刪除輸出過的字，把多餘的字刪掉，維持視窗的美觀。
後來我找到的方法是使用 `"/033"` 的方式 ，也就是 ANSI Escape Codes，只是我當時在寫的時候還沒有了解這麼多，所以我自己又寫了別的函式來達到我想要的效果

像是 `MoveCursor()` 可以使用 `"\033[{line};{column}H"`來完成，或是 `DeleteOutput()` 可以透過 `"\033[1K"` 來實現，但當時在寫的時候不知道可以這麼做，現在回過頭來看，的確有很多地方可以改進。

<img src="https://imgur.com/l2tkRwl.png" width="70%">  

<img src="https://imgur.com/urmyBvQ.png" width="70%">  

### 五子棋

[Gomoku.cpp](https://github.com/Guan-Yu-Chen/Practice/blob/main/Game/Gomoku.cpp)是我在學完計算機程式與應用後寫的一個小遊戲，和[BullsAndCows.cpp](https://github.com/Guan-Yu-Chen/Practice/blob/main/Game/BullsAndCows.cpp) 最大的不同在於這個程式有使用到物件導向的概念。但其實在寫完程式一個禮拜後回來看，我認為整個程式寫得沒有很好，在撰寫的過程中也遇到許多問題。

#### 問題  

我遇到的第一個問題就是排版，和寫1A2B的時候一樣，在終端機上要做到視覺美觀是一件不容易的事。

<img src="https://imgur.com/ZKZ20GM.png" width="70%">  

<img src="https://imgur.com/ssHPUn0.png" width="70%">  

如以上兩張圖片所示，圖一是遊戲剛開始的視窗，可以看到棋盤的上方有一部分被切掉了，而圖二是手動調整視窗大小後才顯示整個棋盤的完整樣子。

另一個遇到的問題是在測試的時候發現程式碼一直有不完善的地方。例如在檢查連珠的時候，首先是發現即使連珠了，遊戲還是不會結束；處理完後又發現，如果連珠發生在棋盤邊緣的話，遊戲也不會結束；接著又發現程式檢查不到斜線方向的連珠；然後又發現程式只檢查了左上到右下方向的連珠，而沒有右上到左下方向的……諸如此類的問題一直產生。

#### 反思  

後來和資工系的朋友討論到這件事，我們都認為會造成這些問題的其中一個原因，是在開始撰寫之前沒有先對整個程式有一個良好的規劃，導致在撰寫的過程中，不斷出現問題。
而且因為沒有規劃的關係，程式碼出現像以下主程式只有兩行的奇怪情況。

```cpp
int main()
{
    Gomoku g;
    g.game();
}
```

雖然程式撰寫風格沒有絕對的對錯，但我們都認為這是一個蠻糟糕的寫法。如果今天五子棋只是整個程式的一小部分，這樣的設計或許還算合理，但當今天五子棋是整個程式主體的時候，這樣的寫法就顯得不妥了。

#### 可以改進的方向

經過討論和反思之後，我找出了一些程式可以改善的地方。  
像是有些 function 可以整合在一起 : 檢查連珠的部分，分成了四個 function ，但其實是可以簡化、改寫在一起的。
其他地方則像有些 function 是可以刪除的，例如 `printEmptyLine()` 這個 function 在剛開始撰寫時是有用的函式，但隨著程式碼不斷修改，這個函式已經不需要了。  
而物件導向的部分也可以再重新規劃，有些 function 或 data 根本就不需要寫在 class 底下，整個遊戲流程控制的部分也可以寫在 main function 就好，不需要再寫成一個 member function。


